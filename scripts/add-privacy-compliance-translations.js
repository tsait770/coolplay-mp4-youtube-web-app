const fs = require('fs');
const path = require('path');
const { fileURLToPath } = require('url');
const __dirname = path.dirname(fileURLToPath(import.meta.url)) || __dirname || process.cwd();

const newTranslations = {
  en: {
    consent_terms_intro: "Please read and agree to our terms and privacy policy to continue using CoolPlay.",
    user_agreement: "User Agreement",
    data_collection_summary: "Data We Collect",
    voice_data_brief: "Voice recordings for command recognition (temporary, local processing)",
    usage_data_brief: "Usage statistics and app performance data (anonymous)",
    device_info_brief: "Device model, OS version, and app version for support",
    third_party_compliance: "Third-Party Platform Compliance",
    youtube_compliance_brief: "Strictly follow YouTube API terms, no download or ad removal",
    tiktok_compliance_brief: "Comply with TikTok platform guidelines, content integrity maintained",
    your_rights_summary: "Your Rights",
    access_delete_data: "Request access to or deletion of your personal data",
    revoke_consent: "Revoke permissions at any time through app settings",
    by_continuing_you_agree: "By continuing, you agree to our",
    and: "and",
    reset_consent_title: "Reset Consent",
    reset_consent_message: "This will clear your consent status and show the consent dialog again on next app launch. This is for testing purposes only.",
    reset_consent: "Reset First-Time Consent",
    reset_consent_desc: "Clear consent status for testing",
    consent_reset_success: "Consent has been reset. Restart the app to see the consent dialog again.",
    consent_reset_error: "Failed to reset consent. Please try again.",
    testing_tools: "Testing Tools",
    reset: "Reset",
    error: "Error",
    voice_not_for_training: "Voice data will not be used for AI training purposes without explicit consent",
    usage_scenarios: "Usage Scenarios",
    usage_scenarios_desc: "We collect your usage behavior data in the app (such as playback counts, bookmark creation, feature clicks) to optimize services, analyze performance, and improve user experience.",
    usage_login: "Login: Email address and user ID for authentication",
    usage_subscription: "Subscription: Transaction data through Stripe payment gateway",
    usage_voice_control: "Voice Control: Temporary voice recordings for command recognition",
    usage_streaming: "Streaming: IP address and device info shared with third-party platforms",
    voice_streaming_platform: "Video Streaming & Third-Party Content",
    voice_streaming_desc: "This app integrates video playback functionality from third-party platforms such as YouTube and TikTok. We strictly comply with platform policies:",
    no_download_commitment: "No Download: We do not provide any download, copy, or modify third-party video content features",
    no_modification_commitment: "No Modification: We do not remove ads, logos, or copyright information from videos",
    comply_platform_terms: "Compliance: Strictly follow YouTube API Terms of Service, Google Play policies, and TikTok platform guidelines",
    third_party_data_sharing: "When you play third-party content, your IP address and device information may be directly sent to that content provider (e.g., YouTube/Google) for service provision, view counting, and ad display.",
    advertising_directory: "Advertising & Marketing",
    advertising_directory_desc: "In-app embedded ads (including ads provided by third-party platforms) may use your device advertising identifier (such as Google AD ID) to provide personalized ads. You can reset or limit ad tracking through device settings at any time.",
    ad_id_usage: "Advertising Identifier: Used for ad attribution and effectiveness analysis",
    personalized_ads: "Personalized Ads: Based on your app usage behavior and interests",
    opt_out_ads: "Opt-out: You can reset advertising ID or enable 'Limit Ad Tracking' in device settings",
  },
  "zh-CN": {
    consent_terms_intro: "请阅读并同意我们的条款和隐私政策以继续使用 CoolPlay。",
    user_agreement: "用户协议",
    data_collection_summary: "我们收集的数据",
    voice_data_brief: "用于指令识别的语音录音（临时，本地处理）",
    usage_data_brief: "使用统计和应用性能数据（匿名）",
    device_info_brief: "设备型号、操作系统版本和应用版本（用于支持）",
    third_party_compliance: "第三方平台合规",
    youtube_compliance_brief: "严格遵守YouTube API条款，不下载或移除广告",
    tiktok_compliance_brief: "遵守TikTok平台指南，维护内容完整性",
    your_rights_summary: "您的权利",
    access_delete_data: "请求访问或删除您的个人数据",
    revoke_consent: "随时通过应用设置撤销权限",
    by_continuing_you_agree: "继续使用即表示您同意我们的",
    and: "和",
    reset_consent_title: "重置同意",
    reset_consent_message: "这将清除您的同意状态，并在下次启动应用时再次显示同意对话框。这仅用于测试目的。",
    reset_consent: "重置首次同意",
    reset_consent_desc: "清除同意状态以进行测试",
    consent_reset_success: "同意已重置。重启应用以再次查看同意对话框。",
    consent_reset_error: "重置同意失败。请重试。",
    testing_tools: "测试工具",
    reset: "重置",
    error: "错误",
    voice_not_for_training: "语音数据不会用于AI训练，除非获得您的明确同意",
    usage_scenarios: "使用数据及使用场景",
    usage_scenarios_desc: "我们收集您在应用内的使用行为数据（如播放次数、书签创建、功能点击），用于优化服务、分析性能和改善用户体验。",
    usage_login: "登录场景：收集邮箱地址、用户ID用于身份验证",
    usage_subscription: "订阅场景：通过Stripe支付网关处理的交易数据",
    usage_voice_control: "语音控制场景：暂时录制语音片段用于指令辨识",
    usage_streaming: "串流场景：IP地址、设备信息会分享给第三方平台",
    voice_streaming_platform: "影音串流与第三方内容",
    voice_streaming_desc: "本应用整合了YouTube、TikTok等第三方影音平台的播放功能。我们严格遵守平台政策：",
    no_download_commitment: "不下载：我们不提供任何下载、复制或修改第三方影音内容的功能",
    no_modification_commitment: "不修改：我们不会移除影片中的广告、Logo或版权信息",
    comply_platform_terms: "合规承诺：严格遵守YouTube API服务条款、Google Play政策和TikTok平台规范",
    third_party_data_sharing: "当您播放第三方内容时，您的IP地址、设备信息等会直接传送给该内容提供者（例如YouTube/Google），以供其提供服务、计算观看次数及显示广告。",
    advertising_directory: "广告营销",
    advertising_directory_desc: "应用内嵌的广告（包括第三方平台提供的广告）可能会使用您的设备广告识别码（如Google AD ID）来提供个性化广告。您可以随时通过设备设置来重置或限制广告追踪。",
    ad_id_usage: "广告识别码：用于广告归因和效果分析",
    personalized_ads: "个性化广告：基于您的应用使用行为和兴趣偏好",
    opt_out_ads: "选择退出：您可以在设备设置中重置广告ID或启用'限制广告追踪'",
  },
  "zh-TW": {
    consent_terms_intro: "請閱讀並同意我們的條款和隱私政策以繼續使用 CoolPlay。",
    user_agreement: "使用者協議",
    data_collection_summary: "我們收集的資料",
    voice_data_brief: "用於指令辨識的語音錄音（暫時，本機處理）",
    usage_data_brief: "使用統計和應用程式性能資料（匿名）",
    device_info_brief: "裝置型號、作業系統版本和應用程式版本（用於支援）",
    third_party_compliance: "第三方平台合規",
    youtube_compliance_brief: "嚴格遵守YouTube API條款，不下載或移除廣告",
    tiktok_compliance_brief: "遵守TikTok平台指南，維護內容完整性",
    your_rights_summary: "您的權利",
    access_delete_data: "請求存取或刪除您的個人資料",
    revoke_consent: "隨時透過應用程式設定撤銷權限",
    by_continuing_you_agree: "繼續使用即表示您同意我們的",
    and: "和",
    reset_consent_title: "重置同意",
    reset_consent_message: "這將清除您的同意狀態，並在下次啟動應用程式時再次顯示同意對話框。這僅用於測試目的。",
    reset_consent: "重置首次同意",
    reset_consent_desc: "清除同意狀態以進行測試",
    consent_reset_success: "同意已重置。重新啟動應用程式以再次查看同意對話框。",
    consent_reset_error: "重置同意失敗。請重試。",
    testing_tools: "測試工具",
    reset: "重置",
    error: "錯誤",
    voice_not_for_training: "語音資料不會用於AI訓練，除非獲得您的明確同意",
    usage_scenarios: "使用數據及使用場景",
    usage_scenarios_desc: "我們收集您在應用程式內的使用行為數據（如播放次數、書籤建立、功能點擊），用於優化服務、分析性能和改善用戶體驗。",
    usage_login: "登入場景：收集電子郵件地址、使用者ID用於身份驗證",
    usage_subscription: "訂閱場景：透過Stripe支付閘道處理的交易資料",
    usage_voice_control: "語音控制場景：暫時錄製語音片段用於指令辨識",
    usage_streaming: "串流場景：IP位址、裝置資訊會分享給第三方平台",
    voice_streaming_platform: "影音串流與第三方內容",
    voice_streaming_desc: "本應用程式整合了YouTube、TikTok等第三方影音平台的播放功能。我們嚴格遵守平台政策：",
    no_download_commitment: "不下載：我們不提供任何下載、複製或修改第三方影音內容的功能",
    no_modification_commitment: "不修改：我們不會移除影片中的廣告、Logo或版權資訊",
    comply_platform_terms: "合規承諾：嚴格遵守YouTube API服務條款、Google Play政策和TikTok平台規範",
    third_party_data_sharing: "當您播放第三方內容時，您的IP位址、裝置資訊等會直接傳送給該內容提供者（例如YouTube/Google），以供其提供服務、計算觀看次數及顯示廣告。",
    advertising_directory: "廣告營銷",
    advertising_directory_desc: "應用程式內嵌的廣告（包括第三方平台提供的廣告）可能會使用您的裝置廣告識別碼（如Google AD ID）來提供個性化廣告。您可以隨時透過裝置設定來重置或限制廣告追蹤。",
    ad_id_usage: "廣告識別碼：用於廣告歸因和效果分析",
    personalized_ads: "個性化廣告：基於您的應用程式使用行為和興趣偏好",
    opt_out_ads: "選擇退出：您可以在裝置設定中重置廣告ID或啟用'限制廣告追蹤'",
  },
  ko: {
    consent_terms_intro: "CoolPlay를 계속 사용하려면 약관 및 개인정보 보호정책을 읽고 동의해 주세요.",
    user_agreement: "사용자 계약",
    data_collection_summary: "수집하는 데이터",
    voice_data_brief: "명령 인식을 위한 음성 녹음(임시, 로컬 처리)",
    usage_data_brief: "사용 통계 및 앱 성능 데이터(익명)",
    device_info_brief: "지원을 위한 기기 모델, OS 버전 및 앱 버전",
    third_party_compliance: "제3자 플랫폼 규정 준수",
    youtube_compliance_brief: "YouTube API 약관을 엄격히 준수, 다운로드 또는 광고 제거 금지",
    tiktok_compliance_brief: "TikTok 플랫폼 가이드라인 준수, 콘텐츠 무결성 유지",
    your_rights_summary: "귀하의 권리",
    access_delete_data: "개인 데이터 액세스 또는 삭제 요청",
    revoke_consent: "앱 설정을 통해 언제든지 권한 철회",
    by_continuing_you_agree: "계속 진행하면 다음에 동의하는 것입니다",
    and: "및",
    reset_consent_title: "동의 재설정",
    reset_consent_message: "동의 상태를 지우고 다음 앱 실행 시 동의 대화상자를 다시 표시합니다. 테스트 목적으로만 사용됩니다.",
    reset_consent: "첫 사용 동의 재설정",
    reset_consent_desc: "테스트를 위한 동의 상태 지우기",
    consent_reset_success: "동의가 재설정되었습니다. 앱을 다시 시작하여 동의 대화상자를 다시 확인하세요.",
    consent_reset_error: "동의 재설정에 실패했습니다. 다시 시도해 주세요.",
    testing_tools: "테스트 도구",
    reset: "재설정",
    error: "오류",
    voice_not_for_training: "명시적 동의 없이 음성 데이터는 AI 훈련에 사용되지 않습니다",
    usage_scenarios: "사용 데이터 및 시나리오",
    usage_scenarios_desc: "앱 내 사용 행동 데이터(재생 횟수, 북마크 생성, 기능 클릭 등)를 수집하여 서비스 최적화, 성능 분석 및 사용자 경험 개선에 활용합니다.",
    usage_login: "로그인 시나리오: 인증을 위한 이메일 주소 및 사용자 ID 수집",
    usage_subscription: "구독 시나리오: Stripe 결제 게이트웨이를 통한 거래 데이터 처리",
    usage_voice_control: "음성 제어 시나리오: 명령 인식을 위한 임시 음성 녹음",
    usage_streaming: "스트리밍 시나리오: IP 주소, 장치 정보가 제3자 플랫폼과 공유됨",
    voice_streaming_platform: "영상 스트리밍 및 제3자 콘텐츠",
    voice_streaming_desc: "이 앱은 YouTube, TikTok 등 제3자 영상 플랫폼의 재생 기능을 통합합니다. 우리는 플랫폼 정책을 엄격히 준수합니다:",
    no_download_commitment: "다운로드 금지: 제3자 영상 콘텐츠를 다운로드, 복사 또는 수정하는 기능을 제공하지 않습니다",
    no_modification_commitment: "수정 금지: 동영상의 광고, 로고 또는 저작권 정보를 제거하지 않습니다",
    comply_platform_terms: "규정 준수: YouTube API 서비스 약관, Google Play 정책 및 TikTok 플랫폼 가이드라인을 엄격히 준수합니다",
    third_party_data_sharing: "제3자 콘텐츠를 재생할 때 IP 주소, 장치 정보 등이 해당 콘텐츠 제공자(예: YouTube/Google)에게 직접 전송되어 서비스 제공, 조회수 계산 및 광고 표시에 사용됩니다.",
    advertising_directory: "광고 및 마케팅",
    advertising_directory_desc: "앱에 내장된 광고(제3자 플랫폼 제공 광고 포함)는 맞춤형 광고 제공을 위해 기기의 광고 식별자(Google AD ID 등)를 사용할 수 있습니다. 언제든지 기기 설정에서 광고 추적을 재설정하거나 제한할 수 있습니다.",
    ad_id_usage: "광고 식별자: 광고 기여도 분석 및 효과 측정에 사용",
    personalized_ads: "맞춤형 광고: 앱 사용 행동 및 관심사를 기반으로 제공",
    opt_out_ads: "옵트아웃: 기기 설정에서 광고 ID를 재설정하거나 '광고 추적 제한'을 활성화할 수 있습니다",
  },
  ja: {
    consent_terms_intro: "CoolPlayを引き続き使用するには、利用規約とプライバシーポリシーをお読みいただき、同意してください。",
    user_agreement: "ユーザー契約",
    data_collection_summary: "収集するデータ",
    voice_data_brief: "コマンド認識のための音声録音（一時的、ローカル処理）",
    usage_data_brief: "使用統計とアプリパフォーマンスデータ（匿名）",
    device_info_brief: "サポート用のデバイスモデル、OSバージョン、アプリバージョン",
    third_party_compliance: "サードパーティプラットフォームのコンプライアンス",
    youtube_compliance_brief: "YouTube API規約を厳守、ダウンロードや広告削除は行いません",
    tiktok_compliance_brief: "TikTokプラットフォームガイドラインに準拠、コンテンツの整合性を維持",
    your_rights_summary: "あなたの権利",
    access_delete_data: "個人データのアクセスまたは削除をリクエスト",
    revoke_consent: "アプリ設定からいつでも許可を取り消し",
    by_continuing_you_agree: "続行することで、次に同意したことになります",
    and: "および",
    reset_consent_title: "同意をリセット",
    reset_consent_message: "同意状態をクリアし、次回アプリ起動時に同意ダイアログを再表示します。これはテスト目的のみです。",
    reset_consent: "初回同意をリセット",
    reset_consent_desc: "テスト用に同意状態をクリア",
    consent_reset_success: "同意がリセットされました。アプリを再起動して同意ダイアログを再確認してください。",
    consent_reset_error: "同意のリセットに失敗しました。もう一度お試しください。",
    testing_tools: "テストツール",
    reset: "リセット",
    error: "エラー",
    voice_not_for_training: "明示的な同意なしに音声データをAIトレーニングに使用しません",
    usage_scenarios: "使用データおよび使用シナリオ",
    usage_scenarios_desc: "アプリ内での使用行動データ（再生回数、ブックマーク作成、機能クリックなど）を収集し、サービスの最適化、パフォーマンス分析、ユーザーエクスペリエンスの改善に使用します。",
    usage_login: "ログインシナリオ: 認証のためのメールアドレスとユーザーIDの収集",
    usage_subscription: "サブスクリプションシナリオ: Stripe決済ゲートウェイを介した取引データの処理",
    usage_voice_control: "音声制御シナリオ: コマンド認識のための一時的な音声録音",
    usage_streaming: "ストリーミングシナリオ: IPアドレス、デバイス情報がサードパーティプラットフォームと共有されます",
    voice_streaming_platform: "動画ストリーミングとサードパーティコンテンツ",
    voice_streaming_desc: "このアプリはYouTube、TikTokなどのサードパーティ動画プラットフォームの再生機能を統合しています。プラットフォームポリシーを厳格に遵守します：",
    no_download_commitment: "ダウンロード禁止: サードパーティの動画コンテンツをダウンロード、コピー、または変更する機能は提供しません",
    no_modification_commitment: "変更禁止: 動画内の広告、ロゴ、著作権情報を削除しません",
    comply_platform_terms: "コンプライアンス: YouTube APIサービス規約、Google Playポリシー、TikTokプラットフォームガイドラインを厳格に遵守します",
    third_party_data_sharing: "サードパーティのコンテンツを再生する際、IPアドレス、デバイス情報などがそのコンテンツプロバイダー（例: YouTube/Google）に直接送信され、サービス提供、視聴回数のカウント、広告表示に使用されます。",
    advertising_directory: "広告とマーケティング",
    advertising_directory_desc: "アプリに埋め込まれた広告（サードパーティプラットフォームが提供する広告を含む）は、パーソナライズされた広告を提供するためにデバイスの広告識別子（Google AD IDなど）を使用する場合があります。デバイス設定からいつでも広告トラッキングをリセットまたは制限できます。",
    ad_id_usage: "広告識別子: 広告アトリビューションと効果分析に使用",
    personalized_ads: "パーソナライズ広告: アプリ使用行動と興味に基づいて提供",
    opt_out_ads: "オプトアウト: デバイス設定で広告IDをリセットするか、「広告トラッキング制限」を有効にできます",
  },
};

const languages = ['en', 'zh-CN', 'zh-TW', 'ko', 'ja', 'es', 'fr', 'de', 'pt', 'pt-BR', 'ru', 'ar'];
const l10nDir = path.join(process.cwd(), 'l10n');

languages.forEach((lang) => {
  const filePath = path.join(l10nDir, `${lang}.json`);
  
  try {
    let content = {};
    if (fs.existsSync(filePath)) {
      const fileContent = fs.readFileSync(filePath, 'utf8');
      content = JSON.parse(fileContent);
    }

    if (newTranslations[lang]) {
      Object.assign(content, newTranslations[lang]);
    } else {
      Object.assign(content, newTranslations.en);
    }

    fs.writeFileSync(filePath, JSON.stringify(content, null, 2), 'utf8');
    console.log(`✅ Updated ${lang}.json`);
  } catch (error) {
    console.error(`❌ Error updating ${lang}.json:`, error.message);
  }
});

console.log('\n✅ All translation files updated successfully!');
